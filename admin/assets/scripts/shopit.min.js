$(document).ready(function(){function t(t,e,i){$(t).keyup(function(){var a=escape($(this).val()),n="/admin/index.php/"+i+a;$(e).load(n,function(){$(e).show(),$(".lookup-result").click(function(){var i=$(this).attr("rel");$(t).val(i),$(e).hide()}),$(e).hover(function(){s=!0},function(){s=!1}),$("body").mouseup(function(){s||$(e).hide()})})})}function e(){var t=$('input[name="product_id"]').val(),e=$('[name="cat_id"]').val(),i=$('input[name="product_name"]').val(),a=$('input[name="product_meta_title"]').val(),n=$('textarea[name="product_description"]').val(),o=$('textarea[name="product_meta_description"]').val();$("#google-preview").load("/admin/index.php/inventory/googlepreview",{product_title:i,meta_title:a,product_desc:n,meta_desc:o,product_id:t,cat_id:e})}function i(t){var e=$(t).val(),i=$('input[name="product_id"]').val(),a=$("#shopit-ajax-filter-section").data("link");$.post(a,{cat_id:e,product_id:i},function(t){$("#section-filters").html(t)})}function a(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"_")}$(".fancybox-popup").fancybox({autoSize:!1,width:970,height:450,padding:10,margin:0,centerOnScroll:!0,type:"iframe"}),$(".textbox").each(function(){$(this).attr("title")&&$(this).qtip({style:{classes:"qtip-bootstrap"},position:{my:"left bottom",at:"right top"},show:{delay:0,event:"focus"},hide:{event:"blur"},content:{title:"Tip",button:!0}})}),$(".info li").each(function(){$(this).attr("title")&&$(this).qtip({style:{classes:"qtip-bootstrap"},position:{my:"center right",at:"left center"},show:{delay:0,event:"mouseover"},hide:{event:"mouseout"},content:{title:!1,button:!1}})}),$(".whats-this").each(function(){$(this).attr("title")&&$(this).qtip({style:{classes:"qtip-bootstrap"},position:{my:"left bottom",at:"right top"},show:{delay:0,event:"mouseover"},hide:{event:"mouseout"},content:{title:!1,button:!1}})}),$("#shopitmenu a.nolink").click(function(t){return!1}),$("#shopitmenu .nested a").click(function(){$(this).siblings("ul").is(":visible")?($(this).closest("li").removeClass("selected"),$(this).siblings("ul").hide()):($("#shopitmenu ul").hide(),$("#shopitmenu .nested").removeClass("selected"),$(this).closest("li").addClass("selected"),$(this).siblings("ul").show())}),$(document).bind("click",function(t){var e=$(t.target);e.parents().hasClass("selected")||($("#shopitmenu .selected ul").hide(),$("#shopitmenu .nested").removeClass("selected"))}),$(".btn-action").click(function(t){t.preventDefault()}),$(".actions .btn-action").click(function(){$(this).next("ul").is(":visible")?$(this).next("ul").hide():($(".actions li ul").hide(),$(this).next("ul").show())}),$(".actions ul a").click(function(){$(this).closest("ul").delay(600).fadeOut()}),$(".addtocollection").click(function(t){t.preventDefault();var e=new Date,i=$(this).attr("href")+"?_="+e.getTime();$.get(i,function(t){"on"==t.status?$("#"+t.rowid+" .collection-"+t.menuid+" img").removeClass("hide-tick"):$("#"+t.rowid+" .collection-"+t.menuid+" img").addClass("hide-tick")},"json")}),$(".itemstatus").click(function(t){t.preventDefault();var e=new Date,i=$(this).attr("href")+"?_="+e.getTime(),a=$(this).closest("tr").attr("id");$.get(i,function(t){"0"==t.status?($("#"+t.rowid+" .itemstatus-"+t.menuid+" img").removeClass("hide-tick"),$("#"+t.rowid+" .status-indicator").removeClass("light-red").addClass("light-green"),$(".child-group-"+a+" .status-indicator").removeClass("light-red").addClass("light-green")):($("#"+t.rowid+" .itemstatus-"+t.menuid+" img").addClass("hide-tick"),$("#"+t.rowid+" .status-indicator").removeClass("light-green").addClass("light-red"),$(".child-group-"+a+" .status-indicator").removeClass("light-green").addClass("light-red"))},"json")}),$("#pref_tooltips").click(function(t){t.preventDefault();var e=new Date,i=$(this).attr("href")+"?_="+e.getTime();$.get(i,function(t){"on"==t.status?$("#pref_tooltips img").removeClass("hide-tick"):$("#pref_tooltips img").addClass("hide-tick")},"json")}),$("#pref_codebox").click(function(t){t.preventDefault();var e=new Date,i=$(this).attr("href")+"?_="+e.getTime();$.get(i,function(t){"on"==t.status?$("#pref_codebox img").removeClass("hide-tick"):$("#pref_codebox img").addClass("hide-tick")},"json")}),$(".markasdispatched a").click(function(t){t.preventDefault();var e=$(this).attr("href");$(this).closest("tr").find(".badge").removeAttr("style").html('<img src="/admin/assets/images/loader.gif" class="valign"/>'),$(this).load(e,function(){$(this).closest("tr").find(".badge").addClass("badge-green").text("Dispatched"),$(this).closest("li").fadeOut()})}),$(".ajaxdelete").click(function(t){t.preventDefault();var e=$(this),i=$(this).attr("href"),a=$(this).data("groupid"),n="Are you sure you want to delete this item? This cannot be undone.";$(this).attr("rel")&&(n=$(this).attr("rel"));var o=confirm(n);return o&&$.get(i,function(){$(e).closest("tr").fadeOut("slow"),$(e).closest(".table-row").fadeOut("slow"),$(e).closest(".sortable-image").fadeOut("slow").remove(),""!=a&&$("."+a).fadeOut("slow")}),!1}),$(".ajaxdeletecollectionitem").click(function(t){t.preventDefault();var e=$(this).attr("href"),i=confirm("Are you sure you want to delete this item? This cannot be undone.");return i&&$(this).load(e,function(){$(this).closest(".grid-product").fadeOut("slow")}),!1}),$(".editproductqty").editable("/admin/index.php/inventory/editproductqty",{submit:"OK",event:"dblclick",indicator:'<img src="/admin/assets/images/loader.gif">',tooltip:"Double click to edit..."}),$(".editpageslug").editable("/admin/index.php/pages/editslug",{cancel:"Cancel",submit:"Save",event:"click",indicator:'<img src="/admin/assets/images/loader.gif">',tooltip:"Click to edit..."}),$(".editcollectionslug").editable("/admin/index.php/collections/editslug",{cancel:"Cancel",submit:"Save",event:"click",indicator:'<img src="/admin/assets/images/loader.gif">',tooltip:"Click to edit..."}),$(".editproductslug").editable("/admin/index.php/inventory/editslug",{cancel:"Cancel",submit:"Save",event:"click",indicator:'<img src="/admin/assets/images/loader.gif">',tooltip:"Click to edit..."}),$(".editapilabel").editable("/admin/index.php/options/api/label",{submit:"Save",event:"click",indicator:'<img src="/admin/assets/images/loader.gif">',tooltip:"Click to edit..."}),$(".addattribute").click(function(t){t.preventDefault();var e=$('input[name="attribute_name_new"]').val(),i=$('input[name="attribute_value_new"]').val(),a='<li class="table-row product-attribute highlight"><label><img src="/admin/assets/images/icon-draggable2.png" alt="" class="valign draggable" /></label><input name="attribute_name[]" type="text" value="'+e+'" class="textbox" size="30" /> = <input name="attribute_value[]" type="text" value="'+i+'" class="textbox" size="30" /><input name="attribute_id[]" value="" type="hidden" /><input name="attribute_delete[]" type="hidden" value="false" /></div>';$('input[name="attribute_name_new"]').val(""),$('input[name="attribute_value_new"]').val(""),$("#sortable-productattributes").append(a)}),$(".removeattribute").click(function(t){t.preventDefault(),$(this).closest(".table-row").animate({height:"toggle"},600),$(this).closest(".table-row").find('input[name="attribute_delete[]"]').val("true")}),$(".addproductoption").click(function(t){t.preventDefault();var e=$('input[name="option_label_new"]').val(),i=$('input[name="option_criteria_new"]').val(),a=$('input[name="option_price_new"]').val(),n='<li class="table-row product-option highlight"><label><img src="/admin/assets/images/icon-draggable2.png" alt="" class="valign draggable" /></label><input name="option_label[]" type="text" value="'+e+'" class="textbox" size="20" /> <input name="option_criteria[]" type="text" value="'+i+'" class="textbox" size="20" /> <input name="option_price[]" type="text" value="'+a+'" class="textbox number" size="20" /><input name="option_id[]" value="" type="hidden" /><input name="option_delete[]" type="hidden" value="false" /></li>';$('input[name="option_criteria_new"]').val(""),$('input[name="option_price_new"]').val(""),$("#sortable-productoptions").append(n)}),$(".removeproductoption").click(function(t){t.preventDefault(),$(this).closest(".table-row").animate({height:"toggle"},600),$(this).closest(".table-row").find('input[name="option_delete[]"]').val("true")}),$(".item-conv-rate").each(function(){var t=$(this).attr("data-conv-rate"),e=$(this);$(this).html('<span class="loader"></span>'),$.ajax({type:"GET",async:!0,dataType:"html",url:t,success:function(t){e.html(t)}})}),$('input[name="related_items"]').keyup(function(){var t=escape($(this).val()),e=$('input[name="product_id"]').val(),i="/admin/index.php/inventory/showrelatedresults/"+e+"/"+t;$("#showrelatedresults").load(i,function(){$(".addrelateditem").click(function(t){t.preventDefault();var e=$(this).closest(".relateditemselect").find("input[name='related_product_id']").val(),i=$(this).closest(".relateditemselect").find("input[name='related_product_name']").val(),a=$(this).closest(".relateditemselect").find("input[name='related_product_no']").val(),n=$(this).data("type"),o=$(this).attr("value");$("#relateditems tbody").append('<tr class="tbody highlight"><td>'+i+"</td><td>"+a+"</td><td>"+o+'</td><td><input type="hidden" name="related_items_id[]" value="'+e+'" /><input type="hidden" name="related_items_delete[]" value="false" /><input type="hidden" name="related_items_type[]" value="'+n+'" /></td></tr>'),$(this).closest("tr").fadeOut("slow")})})}),$(".removerelateditem").click(function(){$(this).closest("tr").fadeOut("slow",function(){$(this).find('input[name="related_items_delete[]"]').val("true")})}),$(".editor textarea").markItUp(mySettings),$(".editor-image textarea").markItUp(imageOnly),$("#sortable-gallery").sortable({handle:".gallerythumb",tolerance:"pointer",update:function(){var t=$('[name="gallery_product_id"]').val(),e="";$('[name="gallery_product_image[]"]').each(function(){e+=$(this).val()+";"}),$.post("/admin/index.php/inventory/gallerysort",{product_id:t,product_images:e})}}),$("#sortable-collection").sortable({handle:".grid-product",tolerance:"pointer",update:function(){var t=$('[name="collection_id"]').val(),e="";$('[name="product_id[]"]').each(function(){e+=$(this).val()+";"}),$.post("/admin/index.php/collections/sortable",{collection_id:t,collection_items:e})}}),$("#sortable-productoptions").sortable({items:"li",tolerance:"pointer",handle:".draggable",cursor:"move"}),$("#sortable-productattributes").sortable({items:"li",tolerance:"pointer",handle:".draggable",cursor:"move"}),$("#sortable-categories").sortable({items:"tbody tr",opacity:.8,change:function(){$(".ui-sortable-helper").addClass("highlight")},tolerance:"pointer",axis:"y",cursor:"move",handle:".draggable",update:function(){var t="";$('[name="cat_id[]"]').each(function(){t+=$(this).val()+";"}),$.post("/admin/index.php/category/sortable",{cat_id:t})}}),$(".sortable-pages").sortable({items:"tbody tr",opacity:.8,change:function(){$(".ui-sortable-helper").addClass("highlight")},tolerance:"pointer",axis:"y",cursor:"move",handle:".draggable",update:function(){var t="";$('[name="page_id[]"]').each(function(){t+=$(this).val()+";"}),$.post("/admin/index.php/pages/sortable",{page_id:t})}}),$("tbody.sortable-collections").sortable({connectWith:!1,dropOnEmpty:!1,items:"tr",opacity:.8,change:function(){$(".ui-sortable-helper").addClass("highlight")},tolerance:"pointer",axis:"y",cursor:"move",handle:".draggable",update:function(){var t="";$('[name="collection_id[]"]').each(function(){t+=$(this).val()+";"}),$.post("/admin/index.php/collections/sortlist",{collection_id:t})}}),$("#sortable-crosssellgroups").sortable({items:"tbody tr",opacity:.8,change:function(){$(".ui-sortable-helper").addClass("highlight")},tolerance:"pointer",axis:"y",cursor:"move",handle:".draggable",update:function(){var t="";$('[name="id[]"]').each(function(){t+=$(this).val()+";"}),$.post("/admin/index.php/inventory/sortcrosssellgroups",{id:t})}}),$('select[name="s_orderstatus"]').change(function(){"Dispatched"==$(this).val()?$("#set_dispatched").slideDown():$("#set_dispatched").slideUp()}),$("table").each(function(){$(this).find("th:last").addClass("last-column")}),$("#sections li a").click(function(t){$(".section").hide();var e=$(this).attr("href");$(e).fadeIn("fast"),$(this).removeClass("button-off"),$("#sections li a").not(this).addClass("button-off")});var n=window.location.hash,o=$('#sections li a[href="'+n+'"]');0===o.length?$(n).fadeIn("fast"):o.click(),$("#add_category").click(function(){return $('input[name="xcategory_change"]').val("true"),!$('select[name="categories"] option:selected').remove().appendTo('select[name="x_categories[]"]')}),$("#remove_category").click(function(){return $('input[name="xcategory_change"]').val("true"),!$('select[name="x_categories[]"] option:selected').remove().appendTo('select[name="categories"]')}),$("form").submit(function(){$('select[name="x_categories[]"] option').each(function(t){$(this).attr("selected","selected")})});var l=$("#page_redirect").attr("rel");""!=$("#page_redirect").val()?$("."+l).slideUp("slow"):$("."+l).slideDown("slow"),$("#page_redirect").keyup(function(){""!=$("#page_redirect").val()?$("."+l).slideUp("slow"):$("."+l).slideDown("slow")}),$("#formAddCountry").submit(function(t){t.preventDefault(),$("#feedback").html('<img src="/admin/assets/images/loader.gif" class="valign"/>').fadeIn("slow");var e=$(this).attr("action"),i=$("#country_name").val();$.ajax({type:"POST",url:e,data:{country_name:i},dataType:"html",success:function(t){$("#feedback").hide(),$("#listcountries").append(t)}})}),$("#shipping_operation").change(function(){var t=$(this).val();"between"==t?$("#shipping_value2").show():$("#shipping_value2").hide()}),$("#criteria").change(function(){var t=$(this).val();"category"==t?($("#shipping_operation").load("/admin/index.php/shipping/load_categories"),$('input[name="value"]').val("0.00").hide(),$("#shipping_value2").hide()):($("#shipping_operation").load("/admin/index.php/shipping/load_criteria"),$('input[name="value"]').show())}),$("#loadAttributeSet").change(function(t){var e=$(":selected",this).val(),i="/admin/index.php/inventory/loadattr/"+e;e>0&&$("#sortable-productattributes").load(i)}),$("#loadProductOptionSet").change(function(t){var e=$(":selected",this).val(),i="/admin/index.php/inventory/loadproductopts/"+e;e>0&&$("#sortable-productoptions").load(i)}),$("#shopit_content").on("click","#btn-splitvariantname",function(t){t.preventDefault();var e="/admin/index.php/inventory/splitvariantname";$.ajax({type:"GET",url:e,success:function(t){$("#ajax-splitvariantname").html(t),$("#variant-name").animate({opacity:.4}),$('input[name="product_name"]').attr("readonly","readonly").removeClass("required"),$("#sortable-productattributes").sortable({items:"li",tolerance:"pointer",handle:".draggable",cursor:"move"})}})}),$("#shopit_content").on("click","#btn-joinvariantname",function(t){t.preventDefault(),$("#variant-name").show().animate({opacity:1});var e=[];$(".variant-attr-value").each(function(){var t=$(this).val();""!=t&&e.push(t)});var i=e.join(" ");$('input[name="product_name"]').removeAttr("readonly").addClass("required").val(i),$('#ajax-splitvariantname input[type="text"]').val(""),$("#ajax-splitvariantname ul, #ajax-splitvariantname div").remove()}),$("body").on("click",".variant_attr_image_remove",function(t){t.preventDefault();var e=$(this).data("imginput");$(this).closest("li").find("img").attr("src","/admin/assets/scripts/markitup/sets/html/images/picture.png").removeAttr("height"),$('input[name="'+e+'"]').val(""),$(this).remove()}),$("#widgets-list, #widgets-list-active").sortable({connectWith:".widgets-list",tolerance:"pointer",cursor:"move",items:"li"}).disableSelection(),$(".realtime_widget").length>0&&setInterval(function(){var t="/admin/index.php/dashboard/realtime?_="+Math.random();$(".widget_scrollable").load(t+" #realtime_widget_content")},1e4),$(".jqueryui-date-picker").datepicker({dateFormat:"yy-mm-dd",showOn:"focus",showButtonPanel:!0}),$(".filter-more input").is(":checked")?($("#filter-more").hide(),$(".filter-more").show()):($("#filter-more").show(),$(".filter-more").hide()),$("#filter-more").click(function(t){t.preventDefault(),$(this).hide(),$(".filter-more").show()}),$('[name="custom_field_type"]').change(function(){"option"==$(this).val()?$('[name="custom_field_default"]').removeAttr("disabled"):$('[name="custom_field_default"]').attr("disabled","disabled")}),"option"==$('[name="custom_field_type"]').val()?$('[name="custom_field_default"]').removeAttr("disabled"):$('[name="custom_field_default"]').attr("disabled","disabled");var s;t('input[name="product_brand"]',"#product_brand_lookup","inventory/brands/"),t('input[name="supplier_code"]',"#supplier_code_lookup","inventory/suppliers/"),$("#more-mpnupc").click(function(t){t.preventDefault(),$(".more-mpnupc").slideDown(),$(this).hide()}),$(".vat-exempt").click(function(){var t=$(this).attr("rel"),e=new Date,i="/admin/index.php/shipping/updatevat?_="+e.getTime();if($(this).is(":checked"))var a="1";else var a="0";$.post(i,{id:t,vat_exempt:a}),$(this).closest("td").append(" <span>Updated.</span>").addClass("highlight"),$(this).closest("tr").addClass("highlight")}),$("#display_country").change(function(t){$("#formDisplayCountryRules").submit()}),e(),$(".google-preview").keyup(function(){e()}),$(".child-item-group").sortable({items:"tr",opacity:.8,axis:"y",connectWith:".child-item-group",dropOnEmpty:!0,handle:".draggable",tolerance:"pointer",change:function(){$(".ui-sortable-helper").addClass("highlight")},cursor:"move",update:function(t,e){var i="",a=$(e.item).closest("tbody").attr("data-parent_id");$(e.item).closest(".child-item-group").find('[name="child_id[]"]').each(function(){i+=$(this).val()+";"}),$(e.item).closest(".child-item-group").find(".child-group-placeholder").remove(),$(e.sender).not(":has(.child-item)").append('<tr class="child-group-placeholder"><td colspan="9" align="center"><span class="badge badge-grey">Drag &amp; drop a variation here</span></td></tr>'),$.post("/admin/index.php/inventory/sortvariations",{child_id:i,parent_id:a})}}),$("input#account_user").blur(function(){var t=$('input[name="account_user"]').val();""!=t&&$.post("/admin/index.php/customers/checkuser",{Email:t},function(t){$("#account_checkuser").html(t.message),1==t.failed?$('input[type="submit"]').attr("disabled","disabled").animate({opacity:.3}):$('input[type="submit"]').removeAttr("disabled").animate({opacity:1})},"json")}),$("#shopit_content").on("click",'input[name="checkall"]',function(){var t=$(this).closest("table");$(this).is(":checked")?($(".checkall",t).each(function(){$(this).prop("checked",!0)}),$('input[name="submitcheck"]').removeAttr("disabled")):($(".checkall",t).each(function(){$(this).prop("checked",!1)}),$('input[name="submitcheck"]').attr("disabled","disabled"))}),$(".checkall").click(function(){var t=$(".checkall:checked").length;t>0?$('input[name="submitcheck"]').removeAttr("disabled"):$('input[name="submitcheck"]').attr("disabled","disabled")}),$('select[name="action"]').change(function(){var t=$(":selected",this).attr("rel");"popup"==t?$("#formCheck").attr("target","_blank"):$("#formCheck").removeAttr("target")}),$(".order-status-group").sortable({items:"tr",opacity:1,axis:"y",handle:".draggable",tolerance:"pointer",change:function(){$(".ui-sortable-helper").addClass("highlight")},cursor:"move"}),$('input[name="ptag_new"]').keypress(function(t){if(13==t.which||188==t.which||44==t.which){t.preventDefault();var e=$('input[name="product_tags"]').val(),i=$(this).val().toLowerCase();if(""!=i){if(""==e)var a=i;else var a=e+","+i;$("#product_tags").val(a);var n="<li>"+i+'<a href="#" class="ptag-remove"></a></li> ';$("#ptags-new").before(n)}$(this).val("")}}),$("#ptags").on("click",".ptag-remove",function(t){t.preventDefault();var e=$(this).closest("li").text(),i=$('input[name="product_tags"]').val(),a=i.replace(e,"");$("#product_tags").val(a),$(this).closest("li").remove()}),$("#content").sortable({items:".filter-group",opacity:1,axis:"y",handle:".draggable-parent",tolerance:"pointer",cursor:"move"}),$("#filter-groups").sortable({items:".filter-group-option",opacity:1,axis:"y",handle:".draggable-child",tolerance:"pointer",cursor:"move",placeholder:"sortable-placeholder",forcePlaceholderSize:!0,connectWith:".filter-group-options"}),$("#filter-groups-collapse").click(function(t){t.preventDefault(),$(this).hasClass("collapsed")?($(this).removeClass("collapsed"),$(".filter-group-options").slideDown(),$(".filter-group-option-new").slideDown(),$(".toggle-filter-group").html("&uarr;")):($(this).addClass("collapsed"),$(".filter-group-options").slideUp(),$(".filter-group-option-new").slideUp(),$(".toggle-filter-group").html("&darr;"))}),$("#filter-groups").on("click",".toggle-filter-group",function(t){t.preventDefault(),$(this).closest(".filter-group").find(".filter-group-options").slideToggle(),$(this).closest(".filter-group").find(".filter-group-option-new").slideToggle(),$(this).hasClass("collapsed")?($(this).removeClass("collapsed"),$(this).html("&uarr;")):($(this).addClass("collapsed"),$(this).html("&darr;"))}),$("#filter-groups-create").click(function(t){t.preventDefault(),$("#filters-welcome").hide();var e=$(this).attr("href"),i=$(".filter-group").length+1;$.post(e,{n:i},function(t){$(t).prependTo("#filter-groups")})}),$("#filter-groups").on("click",".add-filter-option",function(t){t.preventDefault();var e=$(this).attr("href"),i=$(this).closest(".filter-group"),a=$(i).find(".filter-group-options"),n=$(i).find('input[name="new_filter_label"]').val(),o=$(i).find('input[name="new_filter_colour"]').val(),l=$(i).find(".filter-group-option").length+1,s=$(i).data("key");$.post(e,{filter_label:n,filter_colour:o,n:l,key:s},function(t){$(t).appendTo(a)}),$(i).find('input[name="new_filter_label"]').val(""),$(i).find('input[name="new_filter_colour"]').val("")}),$("#filter-groups").on("click",".remove-filter-option",function(t){t.preventDefault();var e=$(this).attr("href"),i=$(this).data("filter-id"),a="Are you sure you want to delete this filter option? This cannot be undone.",n=$(this).closest(".filter-group-option");$(this).attr("rel")&&(a=$(this).attr("rel"));var o=confirm(a);return o&&$.post(e,{filter_id:i},function(t){$(n).remove()}),!1}),$("#filter-groups").on("click",".remove-filter-group",function(t){t.preventDefault();var e=$(this).attr("href"),i=$(this).data("group-id"),a="Are you sure you want to delete this filter group and all its options? This cannot be undone.",n=$(this).closest(".filter-group");$(this).attr("rel")&&(a=$(this).attr("rel"));var o=confirm(a);return o&&$.post(e,{group_id:i},function(t){$(n).fadeOut(600,function(){$(this).remove()})}),!1}),$("#section-filters").on("keypress",'input[name="new_filter"]',function(t){if(13==t.which){t.preventDefault();var e=$(this).data("group-id"),i=$(this).val(),a=$(this).data("link"),n=$(this).closest("fieldset").find("div"),o=$(n).find("label").length+1;""!=i&&($.post(a,{group_id:e,label:i,filter_order:o},function(t){$(t).appendTo(n)}),$(this).val(""))}}),$("select#cat_id").ready(function(){i("select#cat_id option:selected")}),$("select#cat_id").change(function(){i(this)}),$(".match-title").keyup(function(){var t=$(this).val(),e=a(t);$(".match-tag").val(e)}),$("body").on("click","code.select-on-click",function(){var t=$(this).text(),e=$(this).width(),i='<input autofocus="on" readonly="readonly" style="width:'+e+'px;display:inline-block;border:none;background:transparent;text-align:center;margin:0;padding:0;color:black;" type="text" value="'+t+'" />';$(this).html(i).removeClass("select-on-click").addClass("unselect-on-click")}),$("body").on("blur","code.unselect-on-click",function(){var t=$("input",this).val();$(this).text(t).removeClass("unselect-on-click").addClass("select-on-click")}),$("#section-gallery").on("click","#btn-photo-upload",function(t){var e=$(this).attr("rel");$(this).val("Uploading...");for(var i=document.getElementById("photo-select"),a=i.files,n=new FormData,o=0;o<a.length;o++){var l=a[o];if(l.type.match("image.*")){n.append("product_image",l,l.name);var s=new XMLHttpRequest;s.open("POST",e,!0),s.onload=function(){200==s.status&&$("#btn-photo-upload").val("Upload photo")},s.send(n),s.onreadystatechange=function(){if(4==s.readyState){var t=s.responseText;$("#sortable-gallery").append(t),$("#btn-photo-upload").val("Upload photo")}}}else $("#btn-photo-upload").val("Upload photo")}}),$('.permissions input[type="checkbox"]').click(function(){if($(this).attr("rel")&&$(this).is(":checked")){var t=$(this).attr("rel");$('input[name="'+t+'"]').prop("checked",!0)}}),jQuery.extend(jQuery.validator.messages,{required:"Required",email:"Invalid",number:"Invalid",digits:"Invalid"}),$("#formAddEditItem").validate({errorElement:"span",invalidHandler:function(t,e){if(e.numberOfInvalids()>0){e.showErrors();var i=$(":input.error").closest(".section"),a=i.attr("id");$('#sections li a[href="#'+a+'"]').click()}}}),$("table.sticky").stickyTableHeaders(),$("body").on("click",".shopit-shortcut-create",function(t){t.preventDefault();var e=prompt("Create a shortcut to the current page?","Give me a label..."),i=$(this).attr("href"),a=$(this).parent("li");e.length>1&&$.ajax({type:"GET",url:i,data:{label:e},dataType:"json",success:function(t){$(a).before('<li><a href="'+t.value+'" class="shopit-shortcut">'+t.label+' <span data-link="/admin/index.php/options/deshortcut/'+t.id+'">&#10005;</span></a></li>')}})}),$("body").on("click",".shopit-shortcut span",function(t){t.preventDefault();var e=$(this).closest("li"),i=$(this).data("link"),a=confirm("Delete shortcut?");a&&$.ajax({type:"GET",url:i,success:function(t){$(e).remove()}})})});